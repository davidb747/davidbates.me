---
Title: Concurrency; mutual exclusion
Tag: Rust
---

# Mutex<T> API  

## 1.  

```rust
use std::sync::Mutex;
fn main() {
    let m= Mutex::new(5);
    {
        let mut num= m.lock().unwrap();
        *num= 6;
    }
    println!("m = {:?}", m);
}
```

> m = Mutex { data: 6, poisoned: false, .. }  

---

## 2.  

```rust
use std::sync::Mutex;
use std::thread;

fn main() {
    let counter= Mutex::new(0);
    let mut handles= vec![];
    for _ in 0..10{
        let handle= thread::spawn(move || {
            let mut num= counter.lock().unwrap();
            *num+= 1;
        });
        handles.push(handle);
    }

    for handle in handles{
        handle.join().unwrap();
    }

    println!("Result: {}", *counter.lock().unwrap());
}
```
> use of move value ..

---  

```rust


```

> borrow of moved value 